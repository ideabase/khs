{% cache %}

{# Checking to see if this is an entry or category page #}
{% if entry is defined %}
  {% if entry.mainFeaturedItem | length %}
  {% set featured = entry.mainFeaturedItem.all() %}
  {% endif %}
{% elseif category is defined %}
  {% if category.mainFeaturedItem | length %}
    {% set featured = category.mainFeaturedItem.all() %}
  {% endif %}
{% endif %}

{% if featured is defined %}
  {% for entry in featured %}
    {% set fields = entry.fields %}
    <div class="feature-section-background">
          <div class="feature-section-1">
            <div class="feature-2">
              <h5 class="feature-title">Now Featuring</h5>
              <h3 class="feature-heading">{{entry.title}}</h2>
              {% for field in fields %}
              {% switch field %}
                {% case 'startDate' %}
                  {{entry.startDate  | date('M j, Y')}}

                {% case 'eventLocation' %}
                  {{entry.eventLocation}}

                {% case 'startTime' %}
                  {{entry.startTime}}

                {% case 'endTime' %}
                  {{entry.endTime}}

                {% default %}

              {% endswitch %}
              {% endfor %}

              {% if entry.teaserText %}
                <p>{{ entry.teaserText }}</p>

              {% elseif entry.body %}
                {{ entry.body | raw }}

              {% elseif entry.mediaDescription %}
                {{ entry.mediaDescription | raw}}
              {% endif %}

              <a href="{{entry.url}}" class="feature-button">See {{entry.title}}</a>
            </div>
            <div class="feature-1">
              {% for asset in entry.featureImage.all() %}
                <img class="lazy" data-src="{{ asset.url('secondaryImage') }}" alt="{{ asset.title }}" / >
              {% endfor %}
            </div>
          </div>
    </div>
  {% endfor %}
{% endif %}
{% endcache %}
